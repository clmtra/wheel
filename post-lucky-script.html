<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wheel Request</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
<span class="t706__cartwin-totalamount">
    <div class="t706__cartwin-prodamount-price">9 990</div>
    <div class="t706__cartwin-prodamount-currency"> ₽</div>
</span>
<div class="t-form__submit">
    <button type="submit" class="t-submit" style="color:#fff4f0;border:1px solid #fff4f0;background-color:#7e5bba;">Оформить заказ</button>
</div>
<!--<form id="clicker">-->
<!--    <input type="text" name="s" placeholder="Search...">-->
<!--    <input type="submit" value="Search">-->
<!--</form>-->

<!--<button onclick="sendPost()">CLICK</button>-->
<script>
    // const data = {
    //     id: 2,
    //     customer: "Yaffa"
    // }

    // $("#clicker").submit(function (event){
    //     var httpRequest = new XMLHttpRequest()
    //     httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
    //     httpRequest.open('POST', "http://localhost:8080/wheel")
    //     httpRequest.send('1=' + '30')
    // })


    // good way
    sessionStorage.setItem("tt_sessionId", "2")

    $(document).ready(function () {
        $('.t-form__submit .t-submit').click(function (event) {
            const Url = "https://luckeel.herokuapp.com/wheel";
            let sessionId = sessionStorage.getItem("tt_sessionId")
            let amount = $('.t706__cartwin-totalamount .t706__cartwin-prodamount-price').text()
            let formData = JSON.stringify({"session_id": sessionId, "amount": amount})

            $.ajax({
                type: "POST",
                url: Url,
                headers: {
                    "Content-Type": "application/json"
                },
                data: formData
            }).done(function (data) {
                console.log(data);
            })

            event.preventDefault();
        });
    })


    // $.ajax({
    //     type: "POST",
    //     url: Url,
    //     data: JSON.stringify({ "id": 2, "customer" : "Yaffa" }),
    //     contentType: "application/json",
    //
    //     success: function (result) {
    //         console.log(result);
    //     },
    //     error: function (result, status) {
    //         console.log(result);
    //     }
    // });


    //     function sendPost() {
    //     var httpRequest = new XMLHttpRequest()
    // //     httpRequest.onreadystatechange = function (data) {
    // //     // code
    // // }
    //     httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
    //     httpRequest.open('POST', "http://localhost:8080/wheel")
    //     httpRequest.send('1=' + '30')
    // }

</script>
</body>

</html>

<!--<script>-->
<!--    let req = new XMLHttpRequest();-->
<!--    req.open("POST", "http://localhost:8080/wheel");-->
<!--    // req.setRequestHeader("Accept", "application/json");-->
<!--    req.setRequestHeader("Access-Control-Allow-Origin", "'http://localhost:63342")-->
<!--    req.setRequestHeader("Content-Type", "application/json");-->

<!--    let data = `{-->
<!--    "id": 78912,-->
<!--    "customer": "Jason Sweet",-->
<!--    }`;-->

<!--    req.send(data);-->
<!--    console.log(req.responseText);-->
<!--</script>-->